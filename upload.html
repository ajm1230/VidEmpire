<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media Upload</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="firebase-config.js" ></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #uploadModal {
      background-color: rgba(0, 0, 0, 0.6);
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <div class="container mx-auto px-4 py-6">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">Media Upload Dashboard</h1>
      <button id="open-upload" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Upload Media</button>
    </div>

    <div class="flex gap-4 mb-6">
      <button id="toggle-posts" class="bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded">Posts</button>
      <button id="toggle-videos" class="bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded">Videos</button>
    </div>

    <div id="posts-section" class="space-y-4"></div>
    <div id="videos-section" class="space-y-4 hidden"></div>
  </div>

  <!-- Upload Modal -->
  <div id="uploadModal" class="fixed inset-0 hidden flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded shadow-md w-full max-w-md relative">
      <button id="close-upload" class="absolute top-2 right-2 text-gray-500 hover:text-black">&times;</button>
      <h2 class="text-xl font-semibold mb-4">Upload / Edit Post</h2>
      <form id="upload-form" class="space-y-4">
        <input type="text" name="title" placeholder="Title" class="w-full border rounded px-3 py-2" required />
        <textarea name="description" placeholder="Description" class="w-full border rounded px-3 py-2" required></textarea>
        <input type="text" name="tags" placeholder="Tags (comma-separated)" class="w-full border rounded px-3 py-2" required />
        <input type="file" name="media" accept="image/*,video/*" class="w-full" />
        <p id="upload-status" class="text-sm"></p>
        <button type="submit" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Submit</button>
      </form>
    </div>
  </div>

  <script>
    const uploadModal = document.getElementById("uploadModal");
    const openUploadBtn = document.getElementById("open-upload");
    const closeUploadBtn = document.getElementById("close-upload");
    const uploadForm = document.getElementById("upload-form");
    const postsSection = document.getElementById("posts-section");
    const videosSection = document.getElementById("videos-section");

    const togglePostsBtn = document.getElementById("toggle-posts");
    const toggleVideosBtn = document.getElementById("toggle-videos");

    openUploadBtn.onclick = () => {
      uploadForm.reset();
      uploadModal.classList.remove("hidden");
    };

    closeUploadBtn.onclick = () => {
      uploadModal.classList.add("hidden");
    };

    togglePostsBtn.onclick = () => {
      postsSection.classList.remove("hidden");
      videosSection.classList.add("hidden");
    };

    toggleVideosBtn.onclick = () => {
      postsSection.classList.add("hidden");
      videosSection.classList.remove("hidden");
    };

    uploadForm.onsubmit = (e) => {
      e.preventDefault();
      const formData = new FormData(uploadForm);
      const title = formData.get("title");
      const description = formData.get("description");
      const tags = formData.get("tags");
      const mediaFile = formData.get("media");

      const isVideo = mediaFile && mediaFile.type.startsWith("video/");
      const mediaURL = URL.createObjectURL(mediaFile);

      const itemDiv = document.createElement("div");
      itemDiv.className = "p-4 bg-white rounded shadow";
      itemDiv.innerHTML = `
        <h3 class="text-lg font-semibold">${title}</h3>
        <p class="text-gray-700 mb-2">${description}</p>
        <p class="text-sm text-gray-500 mb-2">Tags: ${tags}</p>
        ${isVideo
          ? `<video controls class="w-full max-h-64"><source src="${mediaURL}" type="${mediaFile.type}"></video>`
          : `<img src="${mediaURL}" alt="${title}" class="w-full max-h-64 object-cover rounded" />`}
      `;

      (isVideo ? videosSection : postsSection).prepend(itemDiv);

      document.getElementById("upload-status").textContent = "Upload successful!";
      setTimeout(() => {
        uploadModal.classList.add("hidden");
        document.getElementById("upload-status").textContent = "";
      }, 1000);
    };
  </script>
</body>
</html>
